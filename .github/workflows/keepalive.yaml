# .github/workflows/keep_alive.yml
name: Keep Streamlit App Awake

# -----------------------------------------------------------------
# 1️⃣ WHEN TO RUN
# -----------------------------------------------------------------
on:
  # Every 5 minutes (*/5 means “every 5th minute of every hour”)
  schedule:
    - cron: "*/5 * * * *"
  # Allows you to manually trigger the workflow from the GitHub UI
  workflow_dispatch:

# -----------------------------------------------------------------
# 2️⃣ JOB THAT PINGS THE APP
# -----------------------------------------------------------------
jobs:
  ping:
    runs-on: ubuntu-latest          # GitHub provides a fresh Linux VM
    steps:
      - name: Ping the Streamlit app
        # The secret SMBAPP contains the full URL of your deployed app.
        # It is injected safely – the value will be masked in the logs.
        run: |
          curl -s -o /dev/null -m 10 "${{ secrets.SMBAPP }}"
